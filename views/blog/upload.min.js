function s3_upload(a){new S3Upload({s3_object_name:a,file_dom_selector:"files",s3_sign_put_url:"/sign_s3",onProgress:function(a){$("#status div").attr("style","width: "+a+"%;")},onFinishS3Put:function(a){$("#blogImageUrl").val(a)},onError:function(a){$("#status").html("Upload error: "+a)}})}$(document).ready(function(){$("#files").on("change",function(){var a=Math.floor(Math.random()*Math.pow(100,3)+1);$("#blogImageUrl").val("https://artsyvb.s3.amazonaws.com/"+a),s3_upload(a)})});